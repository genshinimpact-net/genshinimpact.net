<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>初次见面，你好！</title>
		<link rel="stylesheet" href="./style.css">
	</head>
	<body>
		<h1 class="hidden" id="title">
			嘿，你来了！这里是一张起始页，由于站长们暂时想不起来这里放啥比较好，所以就诞生出了此页面~</h1>
		<br/>
		<div class="nav-container hidden" id="nav-container">
			<div class="nav-link">
				<img src="./img/yu01.jpg" alt="宇的图片" class="nav-image">
				<h2>宇的<a href="https://yu01.icu" target="_blank">个人主页</a></h2>
			</div>
			<div class="nav-link">
				<img src="./img/0xarch.jpg" alt="0xarch的图片" class="nav-image">
				<h2>0xarch (Soloev)的<a href="https://0xarch.me" target="_blank">个人主页</a></h2>
			</div>
			<div class="nav-link">
				<img src="./img/nahida.png" alt="YuanRetro的图片" class="nav-image">
				<h2>YuanRetro的<a href="https://yuanshen.dev" target="_blank">个人主页</a></h2>
			</div>
			<div class="nav-link">
				<img src="./img/yuanshen_logo.jpg" alt="原神！启动！" class="nav-image">
				<h2><a id="genshinSite" href="about:blank" target="_blank">原神！启动！</a></h2>
			</div>
		</div>
		<footer class="site-footer hidden" id="footer">
			<div class="footer-content">
				&copy; www.genshinimpact.net team 2024 <br/>
				“原神” “Genshin Impact"等为<a href="https://www.mihoyo.com">米哈游</a>（<a
					href="https://www.hoyoverse.com/">HoYoverse</a>）的注册商标，本站内容与米哈游无任何关联
			</div>
			<div class="social-links">
				<a class="no-underline" href="https://github.com/genshinimpact-net" target="_blank">
					<img src="./img/github.svg" alt="GitHub" id="github" style="width: 40px; height: 40px;"/>
				</a>
				<input type="image" src="./img/light.svg" alt="Light Mode" id="theme-toggle"
					   style="height: 40px; width: 40px;"/>
			</div>
		</footer>
		<script type="text/javascript">
            // 获取浏览器的默认语言
            const userLanguage = navigator.language || navigator.userLanguage;
            const site = document.getElementById('genshinSite');

            // 创建一个语言代码到网址的映射对象
            const languageMap = {
                'zh': 'https://ys.mihoyo.com/',
                'en': 'https://genshin.hoyoverse.com/en/',
                'ja': 'https://genshin.hoyoverse.com/jp/',
                'ko': 'https://genshin.hoyoverse.com/ko/',
                'it': 'https://genshin.hoyoverse.com/it/',
                'de': 'https://genshin.hoyoverse.com/de/',
                'fr': 'https://genshin.hoyoverse.com/fr/',
                'ru': 'https://genshin.hoyoverse.com/ru/',
                'es': 'https://genshin.hoyoverse.com/es/',
                'id': 'https://genshin.hoyoverse.com/id/',
                'pt': 'https://genshin.hoyoverse.com/pt/',
                'th': 'https://genshin.hoyoverse.com/th/',
                'tr': 'https://genshin.hoyoverse.com/tr/',
                'vi': 'https://genshin.hoyoverse.com/vi/'
            };

            // 获取浏览器的语言代码并匹配
            const userLanguagePrefix = userLanguage.split('-')[0];  // 获取语言代码前缀（例如: 'zh', 'en'）
            site.href = languageMap[userLanguagePrefix] || languageMap['en'];  // 默认使用英文网址

            document.addEventListener("DOMContentLoaded",()=>{
                const themeToggleButton = document.getElementById("theme-toggle");
                const github = document.getElementById("github");

                const getBrowserDarkMode = () => matchMedia('(prefers-color-scheme:dark)').matches ? "dark" : "light";
                const changeTheme = () => {
                    const currentTheme = localStorage.getItem("theme") ?? getBrowserDarkMode();
                    if (currentTheme === "dark") {
                        document.body.classList.add("dark-mode");
                        document.documentElement.classList.add("dark");
                        themeToggleButton.src = "./img/dark.svg";  // 切换为深色模式图标
                        github.src = "./img/github_dark.svg";
                    } else {
                        document.body.classList.remove("dark-mode");
                        document.documentElement.classList.remove("dark");
                        themeToggleButton.src = "./img/light.svg";  // 切换为浅色模式图标
                        github.src = "./img/github.svg";
                    }
                }

                matchMedia('(prefers-color-scheme:dark)').addEventListener("change",()=>{
                    if(!localStorage.getItem("theme")){
                        changeTheme();
                    }
                });

                // 切换主题并保存用户选择
                themeToggleButton.addEventListener("click", (event) => {
                    const isDarkMode = document.body.classList.contains("dark-mode");

                    let toggleResult = isDarkMode ? "light" : "dark";
                    if(toggleResult === getBrowserDarkMode()){ // 如果切换结果和浏览器主题一致就跟随浏览器，否则覆盖
                        localStorage.removeItem("theme");
                    } else {
                        localStorage.setItem("theme", toggleResult);
                    }

                    changeTheme();
                });

                changeTheme();
            });
		</script>
	</body>
</html>